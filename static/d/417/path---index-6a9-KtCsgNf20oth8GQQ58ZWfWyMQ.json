{"data":{"allMarkdownRemark":{"edges":[{"node":{"id":"6582eeda-d688-52f0-b8f8-574e20c68468","frontmatter":{"title":"Nextjsç®€ä»‹","date":"2019-02-17","description":"ä»¥ä¸€ä¸ªé¡¹ç›®ä¸ºåŸºç¡€ï¼Œç®€è¦ä»‹ç» Next æ¡†æ¶ä¸­çš„ä¸€äº›æ¦‚å¿µå’Œç®€å•ä½¿ç”¨æ–¹å¼"},"html":"<p>æœ¬æ–‡åŸºäºçš„é¡¹ç›®æ¥è‡ªNextçš„å®˜æ–¹æ•™ç¨‹ï¼Œåœ°å€ä¸ºï¼š<a href=\"https://github.com/arunoda/learnnextjs-demo.git\">https://github.com/arunoda/learnnextjs-demo.git</a> ï¼Œé‡‡ç”¨<code class=\"language-text\">clean-url-ssr</code>åˆ†æ”¯ã€‚</p>\n<hr>\n<h4>å‡ ä¸ªä¸»è¦çš„æ¦‚å¿µ</h4>\n<h5>æ¸²æŸ“æ–¹å¼</h5>\n<p>Next ç»“åˆäº†æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚é¦–å±åŠ è½½æ—¶é‡‡ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä¹‹åè‹¥ç”¨æˆ·ç‚¹å‡»é“¾æ¥è¿›å…¥åˆ°æ–°çš„é¡µé¢ï¼Œå¯¹æ–°çš„é¡µé¢åˆ™ä½¿ç”¨å®¢æˆ·ç«¯æ¸²æŸ“ã€‚</p>\n<h5>æœåŠ¡ç«¯æ¸²æŸ“</h5>\n<p>Next ä¸­ï¼Œé¦–æ¬¡è¯·æ±‚é‡‡ç”¨çš„æœåŠ¡ç«¯æ¸²æŸ“ã€‚æœåŠ¡ç«¯æ¸²æŸ“æŒ‡çš„æ˜¯ï¼Œåœ¨æœåŠ¡ç«¯ç”Ÿæˆ html å­—ç¬¦ä¸²ï¼Œç„¶åä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è§£æå¹¶å±•ç¤ºä»æœåŠ¡ç«¯è·å–çš„å†…å®¹ï¼Œå¹¶è¿›è¡Œ<a href=\"https://reactjs.org/docs/react-dom.html#hydrate\">hydrate</a>ï¼Œå¢åŠ äº‹ä»¶å¤„ç†ç­‰ã€‚æœåŠ¡ç«¯æ¸²æŸ“ï¼Œåˆå¯ä»¥åˆ†ä¸ºä¸¤ç§æ–¹å¼ï¼š</p>\n<ul>\n<li>ä¸€ç§æ˜¯é‡‡ç”¨ Next è‡ªèº«çš„è·¯ç”±æ¡†æ¶ï¼Œç›´æ¥åœ¨<code class=\"language-text\">page</code>æ–‡ä»¶å¤¹ä¸­å¢åŠ é¡µé¢ï¼Œè¯·æ±‚çš„é¡µé¢è·¯å¾„ç›´æ¥æ¸²æŸ“å‡º<code class=\"language-text\">page</code>æ–‡ä»¶å¤¹ä¸‹çš„é¡µé¢ã€‚ä¾‹å¦‚ï¼Œåœ¨<code class=\"language-text\">/pages/index.js</code>ä¸­å®šä¹‰ä»¥ä¸‹ç»„ä»¶å¹¶å¯¼å‡ºï¼Œåˆ™å¯ä»¥ç›´æ¥åœ¨<code class=\"language-text\">localhost:3000</code>ä¸­çœ‹åˆ°é€šè¿‡æœåŠ¡ç«¯æ¸²æŸ“å±•ç¤ºå‡ºçš„é¡µé¢ï¼Œé¡µé¢ä¸­åªæœ‰ä¸€ä¸ª<code class=\"language-text\">Hello world!</code>ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>å¦ä¸€ç§æ˜¯è‡ªå®šä¹‰è·¯ç”±ã€‚é€šè¿‡ express è‡ªå®šä¹‰è·¯ç”±ï¼Œè‡ªå®šä¹‰è·¯ç”±ä¼šé€šè¿‡expressæ¡†æ¶çš„<code class=\"language-text\">res.render</code>è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œç„¶åå°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ç›´æ¥å‘ˆç°æœåŠ¡ç«¯æ¸²æŸ“ç»“æœã€‚æ¯”å¦‚<a href=\"https://github.com/arunoda/learnnextjs-demo/blob/4482c6e0f16acea394a7f632ce2cd1e29a492779/server.js#L15\">æ¨¡æ¿é¡¹ç›®ä¸­çš„ä¸€ä¸ªä¾‹å­</a></li>\n</ul>\n<h5>å®¢æˆ·ç«¯æ¸²æŸ“</h5>\n<p>åœ¨é¦–é¡µåŠ è½½å®Œæˆåï¼Œç”¨æˆ·ç‚¹å‡»æŸä¸ªé“¾æ¥ï¼Œå¯¼å‘æ–°çš„é¡µé¢ï¼Œæ­¤æ—¶åˆ™åŠ è½½å¯¹åº”é¡µé¢çš„ JS æ–‡ä»¶ï¼Œå°†JS ä¸‹è½½å®¢æˆ·ç«¯åï¼Œåœ¨å®¢æˆ·ç«¯è¿›è¡Œæ¸²æŸ“ï¼Œå±•ç¤ºé¡µé¢å†…å®¹ã€‚æ­¤æ—¶ä¸å†é€šè¿‡æœåŠ¡ç«¯ç”Ÿæˆé¡µé¢ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯åŠ è½½ JS å¹¶ç”Ÿæˆé¡µé¢ã€‚</p>\n<blockquote>\n<p>Next ä¸­çš„å®¢æˆ·ç«¯åŠ è½½æ˜¯é€šè¿‡<code class=\"language-text\">Link</code>ç»„ä»¶æ¥å®Œæˆçš„ï¼Œé€šè¿‡åœ¨é¡µé¢ä¸­ä½¿ç”¨<code class=\"language-text\">Link</code>ç»„ä»¶ï¼Œåˆ™å¯ä»¥æ˜¯é¡µé¢æ‹¦æˆªç›´æ¥çš„æœåŠ¡ç«¯è¯·æ±‚ï¼Œè½¬è€Œé‡‡ç”¨åŠ è½½ JSï¼Œå¹¶è¿›è¡Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚è‹¥ç›´æ¥ä½¿ç”¨<code class=\"language-text\">a</code>æ ‡ç­¾ï¼Œåˆ™ç›¸å½“äºç›´æ¥è½¬å‘æ–°çš„é¡µé¢ï¼Œåˆ™æ­¤æ—¶è¿˜æ˜¯ä¼šé‡æ–°è¯·æ±‚æœåŠ¡ç«¯ï¼Œè¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚</p>\n</blockquote>\n<h5>é¡µé¢å…¼å®¹ä¸¤ç§æ¸²æŸ“æ–¹å¼</h5>\n<p>å¦‚ä¸Šæ‰€è¿°ï¼Œç”±äº Next å°†é¦–é¡µé‡‡ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè€Œç”¨æˆ·å¯èƒ½åœ¨æ¯ä¸ªé¡µé¢è¿›è¡Œåˆ·æ–°ï¼Œæ­¤æ—¶è¿™ä¸ªé¡µé¢åˆ™æˆä¸ºåŠ è½½çš„é¦–é¡µï¼Œæ­¤æ—¶é¡µé¢å¿…é¡»èƒ½å¤Ÿè¢«è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œä»è€Œå®Œæˆé¦–é¡µåŠ è½½ï¼›è€Œå¦ä¸€æ–¹é¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½å¯èƒ½ç”±å¦å¤–ä¸€ä¸ªé¡µé¢ä»å®¢æˆ·ç«¯ç‚¹å‡»åé“¾æ¥å¯¼å…¥è€Œæ¥ï¼Œæ­¤æ—¶é¡µé¢åˆ™å¿…é¡»èƒ½å¤Ÿè¿›è¡Œå®¢æˆ·ç«¯æ¸²æŸ“ã€‚ç»¼ä¸Šï¼Œæ¯ä¸ªé¡µé¢éƒ½å¿…é¡»å…¼å®¹æœåŠ¡ç«¯æ¸²æŸ“å’Œå®¢æˆ·ç«¯æ¸²æŸ“æ–¹å¼ã€‚è€Œ Next ä¸­çš„é¡µé¢å¤©ç„¶å…·æœ‰è¿™ç§èƒ½åŠ›ã€‚</p>\n<hr>\n<h4>æ•°æ®è·å–</h4>\n<p>Next å®šä¹‰äº†<code class=\"language-text\">getInitialProps</code>æ–¹æ³•è¿›è¡Œæ•°æ®è·å–ï¼Œå®ƒæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¾‹å­å¦‚ä¸‹ï¼Œ</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//  /pages/post.js</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Post</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">.</span>summary<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/&lt;[/]?p>/g</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">.</span>image<span class=\"token punctuation\">.</span>medium<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\nPost<span class=\"token punctuation\">.</span>getInitialProps <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`https://api.tvmaze.com/shows/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> show <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> show <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Post<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>æœåŠ¡ç«¯æ¸²æŸ“ã€‚è‹¥è¯·æ±‚ postï¼Œå¹¶è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œåˆ™æœåŠ¡ç«¯ä¼šå…ˆæŸ¥çœ‹Post æ˜¯å¦æœ‰å®šä¹‰<code class=\"language-text\">getInitialProps</code>æ–¹æ³•ï¼Œè‹¥æœ‰å®šä¹‰æ­¤æ–¹æ³•ï¼Œåˆ™ä½¿ç”¨å®šä¹‰çš„æ–¹æ³•è¯·æ±‚æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ”¾ç½®åœ¨ä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“å‡ºçš„ html é¡µé¢ä¸­çš„ä¸€ä¸ªscript æ ‡ç­¾ä¸­ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚å®¢æˆ·ç«¯åŠ è½½ html åä¼šå°†æ­¤æ•°æ®æ¸²æŸ“è¿›è§†å›¾ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>__NEXT_DATA__<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>application/json<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\">\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"props\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"pageProps\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"show\"</span><span class=\"token punctuation\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"page\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"/post\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"query\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"900\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"buildId\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"development\"</span><span class=\"token punctuation\">}</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>å®¢æˆ·ç«¯æ¸²æŸ“ã€‚åœ¨è¿›è¡Œå®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼Œæ¸²æŸ“é¡µé¢ï¼Œä¼šå…ˆé€šè¿‡<code class=\"language-text\">getInitialProps</code>è¯·æ±‚æ•°æ®ï¼Œå¹¶å°†è¯·æ±‚åˆ°çš„æ•°æ®é€šè¿‡ props ä¼ é€’ç»™ç»„ä»¶ï¼Œç»„ä»¶è¿›è¡Œå¯¹åº”æ¸²æŸ“ã€‚</li>\n</ul>\n<hr>\n<h4>æ•°æ®ä¼ é€’</h4>\n<p>åœ¨é¡µé¢è·³è½¬æ—¶ï¼Œè‹¥éœ€è¦ä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚åœ¨åˆ—è¡¨é¡µï¼Œç‚¹å‡»æŸä¸ªé“¾æ¥ï¼Œè·³è½¬è‡³å…¶è¯¦æƒ…é¡µï¼Œåˆ™åœ¨è¯¦æƒ…é¡µéœ€è¦çŸ¥é“ï¼Œéœ€è¦å±•ç¤ºå“ªä¸ªå†…å®¹çš„è¯¦æƒ…ï¼Œæ­¤æ—¶åˆ™éœ€è¦ä¼ é€’ç»™è¯¦æƒ…å¯¹åº”æ•°æ®ã€‚åœ¨åˆ—è¡¨é¡µï¼Œè·³è½¬å¦‚ä¸‹</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Link</span> <span class=\"token attr-name\">as</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`/p/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>show<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`/post?id=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>show<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>show<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Link</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>åˆ™åœ¨è¯¦æƒ…é¡µï¼Œè·å–æ­¤ id çš„æ–¹å¼ä¸ºï¼š</p>\n<ul>\n<li>å¯¹äºç»„ä»¶ï¼Œé€šè¿‡ <code class=\"language-text\">withRouter</code>ï¼Œåœ¨<code class=\"language-text\">router.query</code>ä¸­è·å–ï¼Œå¦‚ä¸‹</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Content <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This is the blog post content.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Content props:</span><span class=\"token punctuation\">{</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>å¯¹äº<code class=\"language-text\">getInitialProps</code>æ–¹æ³•ï¼Œé€šè¿‡<code class=\"language-text\">context</code>æ–¹å¼è·å–ï¼Œå¦‚ä¸‹</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">Post<span class=\"token punctuation\">.</span>getInitialProps <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`https://api.tvmaze.com/shows/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> show <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Fetched show:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>show<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>show<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>å½“ç„¶ï¼Œè¿™ä¸¤ç§æ–¹å¼è·å–çš„æ•°æ®æ˜¯ç›¸åŒçš„ã€‚</p>\n<p>è‹¥é‡‡ç”¨è‡ªå®šä¹‰è·¯ç”±ï¼ˆå¦‚ä¸‹ä»£ç ï¼‰ï¼Œåœ¨å¯¹åº”é¡µé¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹å¼é€šè¿‡<code class=\"language-text\">router.query</code>å’Œ<code class=\"language-text\">context.query</code>è·å–<code class=\"language-text\">queryParams</code>ä¸­çš„æ•°æ®ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">server<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/p/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> actualPage <span class=\"token operator\">=</span> <span class=\"token string\">'/post'</span>\n    <span class=\"token keyword\">const</span> queryParams <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id<span class=\"token punctuation\">:</span> req<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span>\n    app<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> actualPage<span class=\"token punctuation\">,</span> queryParams<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>","fields":{"postName":"/Nextjsç®€ä»‹/Nextjsç®€ä»‹"}}},{"node":{"id":"de7a789b-08a7-531d-9b95-ff1cb89bc859","frontmatter":{"title":"Reactäº‹ä»¶å¤„ç†","date":"2018-12-16","description":"æ€»ç»“è‡ªReactå®˜æ–¹æ–‡æ¡£ï¼ŒReactç±»ç»„ä»¶åŠå‡½æ•°ç»„ä»¶ä¸­äº‹ä»¶å¤„ç†"},"html":"<ul>\n<li>React çš„äº‹ä»¶é‡‡ç”¨çš„æ˜¯é©¼å³°å¼çš„å†™æ³•ï¼Œè€Œä¸æ˜¯ç»Ÿä¸€å°å†™</li>\n<li>äº‹ä»¶å¤„ç†å¿…é¡»ä¼ é€’å‡½æ•°å¼•ç”¨æˆ–å‡½æ•°å­—é¢é‡</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>activateLasers<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Activate Lasers</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>ä¸èƒ½é€šè¿‡è¿”å› false æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œåªèƒ½é€šè¿‡æ˜¾æ€§è°ƒç”¨ preventDefault è¿›è¡Œ</li>\n</ul>\n<hr>\n<h4>es6 ç±»ç»„ä»¶ä¸­çš„äº‹ä»¶ç»‘å®š</h4>\n<h5>å†™æ³•</h5>\n<ul>\n<li>ç¬¬ä¸€ç§ï¼šä½¿ç”¨ es6 class è¯­æ³•æ—¶ï¼Œå¦‚æœå°†ç±»çš„æ–¹æ³•ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œåˆ™éœ€è¦è¿›è¡Œ this ç»‘å®šã€‚åŸå› ï¼šåœ¨<code class=\"language-text\">onClick={this.handleClick}</code>ä¸­ this.handle å¼•ç”¨æ­£ç¡®ï¼Œäºæ˜¯ä¼šå˜æˆ<code class=\"language-text\">onClick={function(){this.setState({ isRed: !this.state.isRed })}}</code>ï¼Œæ‰€ä»¥ä¼šå‡ºç°åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ this ä¸º undefinedï¼Œäºæ˜¯æŠ¥é”™ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//è¿›è¡Œ this ç»‘å®š</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">//ES6 çš„å†™æ³•ï¼Œåœ¨ç±»ä¸­ç”³æ˜æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸€ç§ç®€å†™å½¢å¼ï¼š</span>\n  <span class=\"token comment\">// handleClick: function(){}</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">change color</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç¬¬äºŒç§</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">//å¦ä¸€ç§å†™æ³•ï¼Œåˆ©ç”¨ç®­å¤´å‡½æ•°ï¼Œè§£å†³ this ç»‘å®šçš„é—®é¢˜ï¼Œå°†ä¸Šé¢çš„ thisï¼Œç›´æ¥ç»‘å®šåˆ°è°ƒç”¨ this.handleClick çš„ thisï¼Œå³ç»„ä»¶ï¼Œä»è€Œè§£å†³äº†è°ƒç”¨ç»‘å®šçš„é—®é¢˜ã€‚</span>\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">change color</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç¬¬ä¸‰ç§ï¼Œåœ¨å›è°ƒä¸­åˆ©ç”¨ç®­å¤´å‡½æ•°ã€‚æ³¨æ„ï¼Œåœ¨è¿™ç§å†™æ³•ä¸­ï¼Œå¦‚æœå›è°ƒæ˜¯ä½œä¸º props ä¼ é€’è¿›æ¥çš„ï¼Œç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„æ¸²æŸ“ã€‚æ‰€ä»¥æ¯”è¾ƒæ¨èçš„æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œç»‘å®šæˆ–è€…åˆ©ç”¨ ğŸ‘† çš„æ–¹æ³•æ¥å†™ã€‚</li>\n</ul>\n<h5>ä¼ å‚</h5>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* åˆ©ç”¨ç®­å¤´å‡½æ•°è§£å†³ç»‘å®šé—®é¢˜ï¼Œæ³¨æ„è¿™é‡Œ handleClick åé¢è¦åŠ æ‹¬å·ã€‚() => this.handleClick()æ˜¯ä¸€æ•´ä¸ªå‡½æ•°å­—é¢é‡ *ï¼Œä½¿ç”¨è¿™ç§å†™æ³•æœ‰ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœè¿™æ˜¯ä¸€ä¸ªè¦ä¼ é€’ç»™å­ç»„ä»¶çš„å±æ€§ï¼Œåˆ™åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œå­ç»„ä»¶ä¼šè®¤ä¸ºå±æ€§å˜æ›´äº†ï¼Œä»è€Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼ä¸å¤ªæ¨è */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">change color</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç¬¬ä¸€ç§å†™æ³•ï¼Œé€šè¿‡ this ç»‘å®šåä¼ å‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          change color\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç¬¬ä¸‰ç§å†™æ³•ï¼Œç®­å¤´å‡½æ•°çš„ä¼ å‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>e <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          change color\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç¬¬äºŒç§å†™æ³•ï¼Œç‰¹æ®Šå†™æ³•çš„ä¼ å‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> id <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isRed<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>welcome<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> background<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isRed <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Welcome to this websit.\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          change color\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h4>å‡½æ•°ç»„ä»¶ä¸­çš„äº‹ä»¶ç»‘å®š</h4>\n<ul>\n<li>åŸºæœ¬å†™æ³•ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> input<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handeClick</span> <span class=\"token operator\">=</span> input <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    input<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>add-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>node <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>input <span class=\"token operator\">=</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handeClick</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>å¯ä»¥å°† handleClick è¿›è¡Œæ”¹å†™ï¼Œæ”¹ä¸ºæ¯”è¾ƒåŸå§‹çš„å‡½æ•°ç”³æ˜å†™æ³•ï¼Œä¸è¿‡ä¸æ¨èã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> input<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//æ”¹ä¸ºå‡½æ•°å£°æ˜çš„å†™æ³•</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handeClick</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    input<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>add-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>node <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>input <span class=\"token operator\">=</span> node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* ç”±äºéœ€è¦ä¼ é€’ inputï¼Œæ— æ³•ç›´æ¥å†™æˆ onClick={handeClick(input)} */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">handeClick</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>å¦‚ä¸Šä¾‹å­ä¸­ï¼Œç”±äºéœ€è¦ä¼ é€’ inputï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥å†™æˆä¼ é€’å­—é¢é‡çš„å½¢å¼ï¼Œå¦‚æœä¸éœ€è¦ä¼ é€’ï¼Œåˆ™å¯ä»¥ç›´æ¥å†™å¼•ç”¨ï¼Œå¦‚ä¸‹ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">1111</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","fields":{"postName":"/Reactäº‹ä»¶å¤„ç†/Reactäº‹ä»¶å¤„ç†"}}},{"node":{"id":"7c77f5b3-d5d0-55ec-a479-fbc2562774c4","frontmatter":{"title":"React16.xRoadmap","date":"2018-12-16","description":"æ­¤æ–‡ç¿»è¯‘è‡ªReactå®˜æ–¹åšå®¢:https://reactjs.org/blog/2018/11/27/react-16-roadmap.htmlã€‚åœ¨åšå®¢ä¸­ï¼Œä½œè€…è®²è¿°äº†React16ä¹‹åçš„å‘å±•è·¯çº¿"},"html":"<p>ä½ å¯èƒ½å·²ç»åœ¨ä¹‹å‰çš„åšå®¢å’Œè§†é¢‘ä¸­å¬è¯´è¿‡æœ‰å…³äºâ€œHookâ€ã€â€œSuspenseâ€ã€â€œConcurrent Renderingâ€è¿™äº›åŠŸèƒ½ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨è¿™äº›åŠŸèƒ½å¦‚ä½•æ•´åˆåœ¨ä¸€èµ·ä»¥åŠåœ¨ React çš„æœªæ¥ç‰ˆæœ¬ä¸­è¿™äº›åŠŸèƒ½è¾¾åˆ°å¯ä½¿ç”¨ç¨‹åº¦çš„æ—¶é—´çº¿ã€‚</p>\n<hr>\n<h4>tl;dr</h4>\n<p>æˆ‘ä»¬è®¡åˆ’æŠŠ React çš„æ–°åŠŸèƒ½æ‹†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé‡Œç¨‹ç¢‘ï¼š</p>\n<ul>\n<li>React16.6 æ¨å‡º â€œä»£ç æ‹†åˆ†çš„ Suspenseâ€</li>\n<li>16.x çš„æŸä¸ªå°ç‰ˆæœ¬å‘å¸ƒ React Hooksï¼ˆåˆ° 2019 å¹´ç¬¬ä¸€å­£åº¦ï¼‰</li>\n<li>16.x çš„æŸä¸ªå°ç‰ˆæœ¬å‘å¸ƒå¹¶å‘æ¨¡å¼</li>\n<li>16.x çš„æŸä¸ªå°ç‰ˆæœ¬å‘å¸ƒâ€œæ•°æ®è·å–çš„ Suspenseâ€</li>\n</ul>\n<p>ï¼ˆè¿™ç¯‡åšå®¢çš„åŸæ¥ç‰ˆæœ¬ç”¨çš„æ˜¯ç²¾ç¡®çš„ç‰ˆæœ¬å·ï¼Œä½†æ˜¯è¢«æ”¹ä¸ºç°åœ¨çš„æ ·å­ï¼Œæ¥ååº”ï¼Œåœ¨è¿™äº›ç‰ˆæœ¬ä¹‹é—´å¯èƒ½éœ€è¦ä¸€äº›å…¶ä»–å°ç‰ˆæœ¬çš„ç§¯ç´¯æ¥è¾¾åˆ°è¿™ä¸€ä¸€ä¸ªç‰ˆæœ¬ï¼‰</p>\n<p>ä¸Šé¢åªæ˜¯é¢„ä¼°ï¼Œè¯¦ç»†æƒ…å†µå¯èƒ½ä¼šéšç€æ—¶é—´çš„æµé€è€Œæœ‰æ‰€å˜åŒ–ã€‚åœ¨ 2019 å¹´æˆ‘ä»¬è®¡åˆ’è‡³å°‘æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼Œä»–ä»¬éœ€è¦æ›´å¤šæ¢ç´¢ï¼Œè¿˜æ²¡æœ‰å…·ä½“çš„å‘å¸ƒè®¡åˆ’ï¼š</p>\n<ul>\n<li>Modernizing React DOM</li>\n<li>Suspense for Server Rendering</li>\n</ul>\n<p>æˆ‘ä»¬æœŸå¾…åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆä¸­å¯¹äºè¿™äº›é¡¹ç›®çš„æ—¶é—´çº¿æœ‰è¿›ä¸€æ­¥çš„ç¡®å®šã€‚</p>\n<hr>\n<h4>å‘å¸ƒæ—¶é—´çº¿</h4>\n<p>æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå•ç‹¬çš„ç‰ˆæœ¬æ¥æŠŠè¿™äº›åŠŸèƒ½æ•´åˆåˆ°ä¸€èµ·ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šåœ¨æ¯ä¸ªåŠŸèƒ½å·²ç»å‡†å¤‡å¥½çš„æƒ…å†µä¸‹è¿›è¡Œå‘å¸ƒï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°½å¿«ä½¿ç”¨å®ƒä»¬ã€‚å•ç‹¬çœ‹æŸä¸ªåŠŸèƒ½ï¼ŒAPI çš„è®¾è®¡å¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆï¼Œè¿™ç¯‡åšå®¢ä¼šå±•ç¤ºæˆ‘ä»¬è®¡åˆ’çš„ä¸»è¦éƒ¨åˆ†ï¼Œæ¥å¸®åŠ©ä½ æœ‰ä¸€ä¸ªæ•´ä½“çš„æŠŠæ¡ã€‚</p>\n<p>é€æ­¥å‘å¸ƒçš„ç­–ç•¥æœ‰åŠ©äºæˆ‘ä»¬é‡æ–°å®šä¹‰ APIï¼Œä½†æ˜¯ï¼Œåœ¨è¿‡æ¸¡æ—¶æœŸï¼ŒæŸä¸ªæ²¡æœ‰å®Œå…¨å®Œå–„çš„åŠŸèƒ½å¯èƒ½ä¼šé€ æˆéƒ¨åˆ†ç–‘æƒ‘ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›ä¸åŒçš„åŠŸèƒ½å¯¹ä½ çš„ App æ¥è¯´æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œä»–ä»¬æ˜¯å¦‚ä½•äº’ç›¸å…³è”çš„ï¼Œä»¥åŠä½ å¯ä»¥åœ¨ä»€ä¹ˆæ—¶å€™å­¦ä¹ å¹¶ä½¿ç”¨å®ƒä»¬ã€‚</p>\n<h5>React16.6ï¼ˆå·²å‘å¸ƒï¼‰ï¼šä»£ç æ‹†åˆ†çš„ Suspense</h5>\n<p><em>Suspense</em>æŒ‡çš„æ˜¯ React çš„æ–°åŠŸèƒ½ï¼Œå½“ç»„ä»¶åœ¨ç­‰å¾…æŸäº›å†…å®¹æ—¶ï¼Œå®ƒèƒ½å¤Ÿæš‚åœæ¸²æŸ“ï¼Œå¹¶å±•ç¤ºä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨ã€‚åœ¨ React16.6 ä¸­ï¼ŒSuspense åªæ”¯æŒä¸€ç§ç”¨æˆ·åœºæ™¯ï¼šä½¿ç”¨<code class=\"language-text\">React.lazy()</code>å’Œ<code class=\"language-text\">&lt;React.Suspense&gt;</code>è¿›è¡Œç»„ä»¶çš„æ‡’åŠ è½½ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// This component is loaded dynamically</span>\n<span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./OtherComponent\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Suspense</span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Spinner</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>OtherComponent</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Suspense</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä½¿ç”¨<code class=\"language-text\">React.lazy()</code>å’Œ<code class=\"language-text\">&lt;React.Suspense&gt;</code>è¿›è¡Œä»£ç æ‹†åˆ†åœ¨ Â <a href=\"https://reactjs.org/docs/code-splitting.html#reactlazy\">ä»£ç æ‹†åˆ†æŒ‡å—</a>ä¸­æœ‰æ‰€æè¿°ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <a href=\"https://medium.com/@pomber/lazy-loading-and-preloading-components-in-react-16-6-804de091c82d\">è¿™ç¯‡æ–‡ç« </a> ä¸­çŸ¥é“å…¶ä»–å®é™…è§£é‡Šã€‚</p>\n<p>ä»£ç æ‹†åˆ†æ˜¯ Suspense çš„ç¬¬ä¸€æ­¥ã€‚å¯¹ Suspense çš„é•¿æœŸè®¡åˆ’ä¹ŸåŒ…æ‹¬è®©å®ƒæ¥å¤„ç†æ•°æ®è·å–çš„é—®é¢˜ï¼ˆä¸ Apollo ç±»ä¼¼çš„åº“è¿›è¡Œæ•´åˆï¼‰ã€‚é™¤äº†æä¾›ä¸€ä¸ªæ›´åŠ æ–¹é¢çš„ç¼–ç¨‹æ¨¡å¼å¤–ï¼ŒSuspense è¿˜åœ¨å¹¶å‘æ¨¡å¼ä¸­æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œåœ¨ä¸‹é¢çš„æœ‰å…³è¯é¢˜ä¸­æˆ‘ä»¬ä¼šæåˆ°æ›´å¤šå†…å®¹ã€‚</p>\n<p><strong>åœ¨ React DOM ä¸­çš„çŠ¶æ€</strong>ï¼šReact16.6.0 åŠæ›´é«˜ç‰ˆæœ¬å¯ç”¨</p>\n<p><strong>åœ¨ React DOM Server ä¸­çš„çŠ¶æ€</strong>ï¼šåœ¨æœåŠ¡å™¨æ¸²æŸ“ä¸­ï¼ŒSuspense æš‚æ—¶ä¸å¯ç”¨ã€‚æˆ‘ä»¬å·²ç»å¼€å§‹åœ¨ç ”ç©¶æ–°çš„å¼‚æ­¥æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå®ƒåŒ…å«å¯¹ Suspense çš„æ”¯æŒã€‚ä½†é‚£æ˜¯ä¸€ä¸ªå¤§è®¡åˆ’ï¼Œå¾—åˆ° 2019 å¹´æ‰èƒ½å®Œæˆã€‚</p>\n<p><strong>åœ¨ React Native ä¸­çš„çŠ¶æ€</strong>ï¼šæ‰“åŒ…çš„æ‹†åˆ†åœ¨ React Native ä¸­å¹¶æ²¡æœ‰å¾ˆå¤§ä½œç”¨ï¼Œä½†æ˜¯åœ¨æŠ€æœ¯ä¸Šï¼Œå½“ç»™æ¨¡å—ä¸€ä¸ª promise æ—¶ï¼Œæ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿé˜»æ­¢<code class=\"language-text\">Reacct.lazy</code>å’Œ<code class=\"language-text\">&lt;Suspense&gt;</code>èµ·ä½œç”¨ã€‚</p>\n<p><strong>å»ºè®®</strong>ï¼šå¦‚æœä½ è¿›è¡Œå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œæˆ‘ä»¬æ¨èä½ å¹¿æ³›ä½¿ç”¨<code class=\"language-text\">Reacct.lazy</code>å’Œ<code class=\"language-text\">&lt;Suspense&gt;</code>è¿›è¡Œä»£ç æ‹†åˆ†ã€‚å¦‚æœä½ è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œåˆ™ä½ ä¸å¾—ä¸ç­‰åˆ°æ–°çš„æœåŠ¡ç«¯æ¸²æŸ“å®Œæˆåæ‰å¯ä»¥é‡‡ç”¨ã€‚</p>\n<h5>React 16.xï¼ˆåˆ° 2019 å¹´ç¬¬ä¸€å­£åº¦ï¼‰ï¼šHooks</h5>\n<p><em>Hooks</em>è®©ä½ å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ state å’Œç”Ÿå‘½å‘¨æœŸç­‰åŠŸèƒ½ã€‚ä»–ä»¬ä¹Ÿè®©ä½ åœ¨ä¸å¢åŠ é¢å¤–å¥—åµŒçš„æƒ…å†µä¸‹åœ¨ç»„ä»¶é—´å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Declare a new state variable, which we'll call \"count\"</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è‡ª 11 æœˆä»½å¼€å§‹å·²ç»åœ¨ Facebook å†…éƒ¨å¼€å§‹ä½¿ç”¨ Hooksã€‚Hooks åœ¨ React16.7 çš„ alpha ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚ä»–ä»¬çš„ API è·ç¦»æœ€ç»ˆç¡®å®šæ—¶å¯èƒ½ä¼šæœ‰äº›å˜åŒ–ã€‚</p>\n<p>Hooks ä»£è¡¨äº†æˆ‘ä»¬å¯¹æœªæ¥ React çš„é¢„æœŸã€‚å®ƒæ—¢ç›´æ¥è§£å†³äº† React çš„ç”¨æˆ·ä½“éªŒé—®é¢˜ï¼ˆå†æ¸²æŸ“å±æ€§æ—¶çš„â€œå±‚å±‚åŒ…è£¹åœ°ç‹±â€å’Œé«˜é˜¶ç»„ä»¶ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é€»è¾‘å¤ç”¨ï¼‰ï¼Œä¹Ÿè§£å†³äº†æˆ‘ä»¬åœ¨ä¼˜åŒ– Reac æ—¶é‡åˆ°çš„é—®é¢˜ï¼ˆæ¯”å¦‚è¯´ä½¿ç”¨ç¼–è¯‘å™¨å†…æ•›ç»„ä»¶çš„å›°éš¾ï¼‰ã€‚Hooks æ²¡æœ‰ä½¿ç±»å¤±æ•ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœ Hooks å‘å±•é¡ºåˆ©ï¼Œåœ¨æœªæ¥çš„æŸä¸ªå¤§ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŠŠå¯¹ç±»çš„æ”¯æŒå•ç‹¬æ‹†åˆ†åˆ°ä¸€ä¸ªåŒ…ä¸­ï¼Œä»¥ä¿æŒ React é»˜è®¤åŒ…çš„ç²¾ç®€ã€‚</p>\n<p><strong>åœ¨ React DOM ä¸­çš„çŠ¶æ€</strong>ï¼šæ”¯æŒ Hooks çš„ç¬¬ä¸€ä¸ª<code class=\"language-text\">react</code>å’Œ<code class=\"language-text\">react-dom</code>ç‰ˆæœ¬æ˜¯<code class=\"language-text\">16.7.0-alpha.0</code>ã€‚æˆ‘ä»¬é¢„è®¡åœ¨æ¥ä¸‹æ¥å‡ ä¸ªæœˆä¸­ä¼šå‘æ›´å¤šçš„ alpha ç‰ˆæœ¬ã€‚ä½ å¯ä»¥é€šè¿‡å®‰è£…<code class=\"language-text\">react@next</code>å’Œ<code class=\"language-text\">react-dom@next</code>æ¥è¯•ç”¨ä»–ä»¬ã€‚åˆ«å¿˜è®°å‡çº§ä½ çš„<code class=\"language-text\">react-dom</code>ï¼Œä¸ç„¶ Hooks ä¸ä¼šç”Ÿæ•ˆã€‚</p>\n<p><strong>åœ¨ React DOM Server ä¸­çš„çŠ¶æ€</strong>ï¼šåŒæ ·çš„ 16.7 alpha ç‰ˆæœ¬çš„<code class=\"language-text\">react-dom</code>å’Œ<code class=\"language-text\">react-dom/server</code>æœ‰å¯¹ Hooks çš„å…¨é¢æ”¯æŒã€‚</p>\n<p><strong>åœ¨ React Native ä¸­çš„çŠ¶æ€</strong>ï¼šæš‚æ—¶æ²¡æœ‰å®˜æ–¹æ–¹æ³•åœ¨ React Native ä¸­ä½¿ç”¨ Hooksã€‚å¦‚æœä½ æ•¢äºå†’é™©ï¼Œå¯ä»¥é‡‡ç”¨<a href=\"https://github.com/facebook/react-native/issues/21967\">è¿™ç¯‡</a>ä¸­æåˆ°çš„éå®˜æ–¹æ–¹æ³•ã€‚é‡Œé¢æœ‰ä¸€ä¸ªå·²çŸ¥å¾…è§£å†³çš„é—®é¢˜æ˜¯ï¼Œ<code class=\"language-text\">useEffect</code>è§¦å‘è¿‡æ™šã€‚</p>\n<p><strong>å»ºè®®</strong>ï¼šå¦‚æœä½ å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬æ¨èä½ åœ¨ä½ å†™çš„ç»„ä»¶ä¸­è¯•ç”¨ Hooksã€‚ç¡®è®¤ä½ å›¢é˜Ÿä¸­çš„æ¯ä¸ªäººéƒ½èµåŒä½¿ç”¨å®ƒä»¬å¹¶ä¸”å¯¹ç†Ÿæ‚‰æ–‡æ¡£ã€‚æˆ‘ä»¬ä¸æ¨èç”¨ Hooks é‡å†™ç°åœ¨å·²æœ‰çš„ç»„ä»¶ï¼Œé™¤éä½ ä¸ç®¡æ€æ ·éƒ½å‡†å¤‡é‡å†™å®ƒä»¬ï¼ˆä¾‹å¦‚ä¸ºäº†ä¿® bug é‡å†™ï¼‰ã€‚åœ¨<a href=\"https://reactjs.org/docs/hooks-faq.html#adoption-strategy\">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šä½¿ç”¨ç­–ç•¥ã€‚</p>\n<h5>React 16.xï¼ˆåˆ° 2019 å¹´ç¬¬äºŒå­£åº¦ï¼‰ï¼šå¹¶å‘æ¨¡å¼</h5>\n<p><em>å¹¶å‘æ¨¡å¼</em>ï¼Œé€šè¿‡åœ¨ä¸é˜»å¡ä¸»è¿›ç¨‹çš„æƒ…å†µä¸‹æ¸²æŸ“ç»„ä»¶æ ‘ï¼Œä½¿å¾— React åº”ç”¨å˜å¾—æ›´åŠ å…·æœ‰é€‚åº”æ€§ã€‚å®ƒå…è®¸ React æ‰“æ–­ä¸€ä¸ªè€—æ—¶å¸¸çš„æ¸²æŸ“ï¼ˆæ¯”å¦‚æ¸²æŸ“ä¸€ä¸ªæ–°çš„æµï¼‰æ¥å¤„ç†ä¸€äº›é«˜ä¼˜å…ˆçº§çš„äº‹åŠ¡ï¼ˆæ¯”å¦‚æ–‡æœ¬è¾“å…¥æˆ–é¼ æ ‡æ‚¬æµ®ï¼‰ã€‚å¹¶å‘æ¨¡å¼ä¹Ÿé€šè¿‡åœ¨å¿«é€Ÿè¿æ¥æ—¶ç•¥è¿‡ä¸éœ€è¦çš„çŠ¶æ€åŠ è½½æ¥æä¾› Suspense çš„ç”¨æˆ·ä½“éªŒã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼šä½ å¯èƒ½åœ¨ä¹‹å‰ï¼Œå¬åˆ°è¿‡è¢«ç§°ä¸ºâ€œå¼‚æ­¥æ¨¡å¼â€çš„å¹¶å‘æ¨¡å¼ã€‚æˆ‘ä»¬å·²ç»æŠŠåå­—æ”¹ä¸ºå¹¶å‘æ¨¡å¼ï¼Œæ¥å¼ºè°ƒ React æ ¹æ®ä¸åŒä¼˜å…ˆçº§æ¥æ‰§è¡Œä»»åŠ¡çš„èƒ½åŠ›ã€‚è¿™ä½¿å®ƒå’Œå…¶ä»–å¼‚æ­¥æ¸²æŸ“çš„æ–¹æ³•èƒ½å¤ŸåŒºåˆ†å¼€æ¥ã€‚</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Two ways to opt in:</span>\n\n<span class=\"token comment\">// 1. Part of an app (not final API)</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.unstable_ConcurrentMode</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Something</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.unstable_ConcurrentMode</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 2. Whole app (not final API)</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">unstable_createRoot</span><span class=\"token punctuation\">(</span>domNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>App</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>æš‚æ—¶æ²¡æœ‰ä¸å¹¶å‘æ¨¡å¼æœ‰å…³çš„æ–‡æ¡£ã€‚å¿…é¡»è¦æ³¨æ„çš„æ˜¯æ¦‚å¿µæ¨¡å‹åœ¨ä¸€å¼€å§‹çš„æ—¶å€™å¯èƒ½ä¼šè®©äººè§‰å¾—ä¸ä¹ æƒ¯ã€‚é˜è¿°å®ƒçš„ä¼˜ç‚¹ã€å¦‚ä½•ä½¿ç”¨å®ƒä»¥åŠå®ƒçš„ç¼ºç‚¹ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯é«˜ä¼˜å…ˆçº§çš„äº‹æƒ…ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æŠŠå®ƒç§°ä¹‹ä¸ºç¨³å®šçš„å‰ææ¡ä»¶ã€‚åœ¨é‚£ä¹‹å‰ï¼Œ<a href=\"https://www.youtube.com/watch?v=ByBPyMBTzM0\">Andrew çš„æ¼”è®²</a>æ˜¯ç°æœ‰çš„æœ€å¥½çš„ä»‹ç»ææ–™ã€‚</p>\n<p>å¹¶å‘æ¨¡å¼ç›¸å¯¹äº Hooks æ¥è¯´è¿˜æ²¡æœ‰ç»è¿‡é‚£ä¹ˆå¤šæ¶¦è‰²ã€‚æœ‰äº› API è¿˜æ²¡æœ‰ç¡®å®šï¼Œå®ƒä»¬ä¹Ÿæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸèµ·ä½œç”¨ã€‚æˆªæ­¢å†™è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬ä¸æ¨èä½ ä½¿ç”¨å®ƒï¼Œé™¤éæ˜¯åœ¨ä¸€äº›ç‰¹åˆ«æ—©æœŸçš„å®éªŒä¸­ä½¿ç”¨ã€‚åœ¨å¹¶å‘æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬é¢„è®¡å®ƒæ²¡æœ‰ç‰¹åˆ«å¤šçš„ bugï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨<code class=\"language-text\">&lt;React.StrictMode&gt;</code>ä¸­äº§ç”Ÿè­¦å‘Šçš„ç»„ä»¶å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¼šæŠŠä¸€äº›åœ¨å…¶ä»–ä»£ç ä¸­äº§ç”Ÿçš„æ€§èƒ½é—®é¢˜é”™è¯¯çš„å½’å› åˆ°å¹¶å‘æ¨¡å¼ä¸Šã€‚æ¯”å¦‚è¯´ï¼Œä¸€ä¸ªéšä¾¿é˜²æ­¢çš„<code class=\"language-text\">setInterval(fn,1)</code>è°ƒç”¨åœ¨å¹¶å‘æ¨¡å¼ä¸­ä¼šæœ‰ç³Ÿç³•çš„å½±å“ã€‚åœ¨å‘å¸ƒæ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬è®¡åˆ’å‘å¸ƒæ›´å¤šæœ‰å…³ç¡®è®¤åŠä¿®å¤è¿™ç±»é—®é¢˜çš„æŒ‡å¼•ã€‚</p>\n<p>åœ¨æˆ‘ä»¬å¯¹ React çš„é¢„æœŸä¸­ï¼Œå¹¶å‘æ¨¡å¼æ˜¯éå¸¸å¤§çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚å¯¹äº CPU å……è¶³çš„æƒ…å†µä¸‹ï¼Œå®ƒèƒ½å¤Ÿè¿›è¡Œæ— é˜»å¡æ¸²æŸ“ï¼Œåœ¨æ¸²æŸ“å¤æ‚ç»„ä»¶æ ‘çš„åŒæ—¶ä¿æŒåº”ç”¨çš„å“åº”ã€‚è¿™åœ¨æˆ‘ä»¬çš„<a href=\"https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html\">JSConf Iceland talk</a>çš„ç¬¬ä¸€éƒ¨åˆ†æœ‰æ‰€æ¼”ç¤ºã€‚å¹¶å‘æ¨¡å¼ä¹Ÿä½¿å¾— Suspense è¡¨ç°å¾—æ›´å¥½ã€‚å®ƒèƒ½å¤Ÿé˜²æ­¢ï¼Œåœ¨ç½‘é€Ÿè¶³å¤Ÿå¿«çš„æƒ…å†µä¸‹ï¼Œå‡ºç°åŠ è½½æŒ‡ç¤ºå™¨ä¸€é—ªè€Œè¿‡çš„æƒ…å†µã€‚åœ¨æ²¡æœ‰äº²çœ¼è§åˆ°çš„æƒ…å†µä¸‹ï¼Œè¿™å¾ˆéš¾è§£é‡Šï¼Œ<a href=\"https://www.youtube.com/watch?v=ByBPyMBTzM0\">Andrew çš„æ¼”è®²</a>æ˜¯å¾ˆå¥½çš„ææ–™ã€‚å¹¶å‘æ¨¡å¼ä¾èµ–äºä¸»è¿›ç¨‹è°ƒåº¦å™¨ï¼Œæˆ‘ä»¬ä¸ Chrome å›¢é˜Ÿåˆä½œï¼Œæœ€ç»ˆæŠŠè¿™ä¸ªåŠŸèƒ½ç§»å…¥åˆ°æµè§ˆå™¨æœ¬èº«ä¸­ã€‚</p>\n<p><strong>åœ¨ React DOM ä¸­çš„çŠ¶æ€</strong>ï¼šåœ¨ React16.6 ä¸­ï¼Œæœ‰ä¸€ä¸ªå¸¦<code class=\"language-text\">unstable_</code>å‰ç¼€çš„ä¸ç¨³å®šå¹¶å‘æ¨¡å¼å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ¨èä½ ä½¿ç”¨å®ƒï¼Œé™¤éä½ æ„¿æ„ç»å¸¸é‡åˆ°é—®é¢˜æˆ–è€…é”™è¯¯ä¸€äº›åŠŸèƒ½ã€‚16.7 çš„ alpha ç‰ˆæœ¬åŒ…å«äº†ä¸ä½¿ç”¨<code class=\"language-text\">unstable_</code>å‰ç¼€çš„<code class=\"language-text\">React.ConcurrentMode</code>å’Œ<code class=\"language-text\">ReactDOM.createRoot</code>ï¼Œä½†æ˜¯åœ¨ 16.7 ä¸­æˆ‘ä»¬å¤§æ¦‚ç‡ä¼šä¿ç•™å‰ç¼€ï¼Œåœ¨æœªæ¥çš„å°ç‰ˆæœ¬ä¸­æ‰æŠŠå¹¶å‘æ¨¡å¼æˆä¸ºæ˜¯ç¨³å®šçš„ã€‚</p>\n<p><strong>åœ¨ React DOM Server ä¸­çš„çŠ¶æ€</strong>ï¼šå¹¶å‘æ¨¡å¼ä¸ç›´æ¥å½±å“æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå®ƒä¼šåœ¨ç°æœ‰çš„æœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹è¿è¡Œã€‚</p>\n<p><strong>åœ¨ React Native ä¸­çš„çŠ¶æ€</strong>ï¼šç°æœ‰è®¡åˆ’æ˜¯ï¼Œå…ˆæ¨è¿Ÿå¹¶å‘æ¨¡å¼åœ¨ React Native ä¸­çš„å®ç°ï¼Œç›´åˆ°<a href=\"https://github.com/react-native-community/discussions-and-proposals/issues/4\">React Fabric</a>è®¡åˆ’æ¥è¿‘å®Œæˆã€‚</p>\n<p><strong>å»ºè®®</strong>ï¼šå¦‚æœä½ å¸Œæœ›åœ¨æœªæ¥ä½¿ç”¨å¹¶å‘æ¨¡å¼ï¼Œè®°å¾—æŠŠä¸€äº›ç»„ä»¶å­æ ‘åŒ…è£¹åœ¨<code class=\"language-text\">&lt;React.StrictMode&gt;</code>å¹¶å¤„ç†è¿™å¯¼è‡´çš„è­¦å‘Šï¼Œè¿™æ˜¯æ¯”è¾ƒå¥½çš„ç¬¬ä¸€æ­¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦æœŸæœ›è€çš„ä»£ç é¥èƒ½å¤Ÿç«‹é©¬èƒ½å¤Ÿå¾—åˆ°å…¼å®¹ã€‚æ¯”å¦‚ï¼Œåœ¨ Facebookï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè®¡åˆ’åœ¨æœ€è¿‘çš„ä»£ç åº“ä¸­ä½¿ç”¨å¹¶å‘æ¨¡å¼ï¼Œåœ¨è¿‘æœŸçš„æœªæ¥ä¸­ï¼Œä¿æŒè€çš„ä»£ç åº“ä¾æ—§ä½¿ç”¨åŒæ­¥æ¨¡å¼ã€‚</p>\n<h5>React16.xï¼ˆåˆ° 2019 å¹´ä¸­ï¼‰ï¼šæ•°æ®è·å–çš„ Suspense</h5>\n<p>ä¸Šé¢æåˆ°è¿‡ï¼Œ<em>Suspense</em>æŒ‡çš„æ˜¯å½“ç»„ä»¶åœ¨ç­‰å¾…æŸäº›å†…å®¹æ˜¯ï¼ŒReact æš‚åœæ¸²æŸ“ï¼Œå¹¶å±•ç¤ºä¸€ä¸ªåŠ è½½æŒ‡ç¤ºå™¨çš„èƒ½åŠ›ã€‚åœ¨å·²ç»å‘å¸ƒçš„ React16.6 ä¸­ï¼ŒSuspense å”¯ä¸€æ”¯æŒçš„ç”¨æˆ·åœºæ™¯æ˜¯åœ¨ä»£ç æ‹†åˆ†ä¸­ã€‚åœ¨æœªæ¥çš„æŸä¸ªå°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæä¾›å®˜æ–¹æ”¯æŒï¼Œæ¥é€šè¿‡å®ƒè¿›è¡Œæ•°æ®è·å–ã€‚æˆ‘ä»¬ä¼šæä¾›ä¸€ä¸ªä¸ Suspense å…¼å®¹çš„ã€åŸºç¡€â€œReact ç¼“å­˜â€çš„æŒ‡å¯¼å®ç°ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œæ’°å†™ã€‚æ•°æ®è·å–çš„åº“ï¼Œæ¯”å¦‚ Apollo å’Œ Relay å°†æ¥å¯ä»¥ä¸ Suspense è¿›è¡Œé›†æˆï¼Œæˆ‘ä»¬ä¼šå‘å¸ƒä¸€ä¸ªç®€å•çš„é›†æˆæŒ‡å¼•ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// React Cache for simple data fetching (not final API)</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> unstable_createResource <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-cache\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Tell React Cache how to fetch your data</span>\n<span class=\"token keyword\">const</span> TodoResource <span class=\"token operator\">=</span> <span class=\"token function\">unstable_createResource</span><span class=\"token punctuation\">(</span>fetchTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Todo</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Suspends until the data is in the cache</span>\n  <span class=\"token keyword\">const</span> todo <span class=\"token operator\">=</span> TodoResource<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// Same Suspense component you already use for code splitting</span>\n    <span class=\"token comment\">// would be able to handle data fetching too.</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>React.Suspense</span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Spinner</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Siblings fetch in parallel */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Todo</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Todo</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>React.Suspense</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Other libraries like Apollo and Relay can also</span>\n<span class=\"token comment\">// provide Suspense integrations with similar APIs.</span></code></pre></div>\n<p>é’ˆå¯¹å¦‚ä½•ä½¿ç”¨ Suspense è·å–æ•°æ®ï¼Œæš‚æ—¶æ²¡æœ‰å®˜æ–¹æ–‡æ¡£ï¼Œä½†æ˜¯ä½ èƒ½å¤Ÿåœ¨<a href=\"https://youtu.be/ByBPyMBTzM0?t=1312\">è¿™ä¸ª talk</a>å’Œ<a href=\"https://github.com/facebook/react/tree/master/fixtures/unstable-async/suspense\">è¿™ä¸ªå° demo</a>ã€‚æˆ‘ä»¬ä¼šåœ¨æ¥è¿‘è¿™æ¬¡å‘å¸ƒçš„æ—¶å€™å†™æ–‡æ¡£ï¼Œé˜è¿° React Cache å’Œå¦‚ä½•ä½¿ç”¨ä½ è‡ªå·±å†™çš„ Suspense å…¼å®¹åº“ã€‚å¦‚æœä½ æ¯”è¾ƒå¥½å¥‡ï¼Œå¯ä»¥åœ¨<a href=\"https://github.com/facebook/react/blob/master/packages/react-cache/src/ReactCache.js\">è¿™é‡Œ</a>çœ‹æ—©å…ˆçš„æºç ã€‚</p>\n<p>ä½é˜¶ Suspense æœºåˆ¶ï¼ˆæš‚åœæ¸²æŸ“å’Œè¿™æš‚æ—¶åé¦ˆï¼‰é¢„è®¡åœ¨ React16.6 ç‰ˆæœ¬ä¸­ç¨³å®šã€‚æˆ‘ä»¬å·²ç»æŠŠä»–ä»¬ç”¨åœ¨ä»£ç æ‹†åˆ†ä¸­ç”¨äº†å‡ ä¸ªæœˆã€‚ç„¶è€Œï¼Œæ•°æ®è·å–çš„é«˜é˜¶ API è¿˜ä¸ç¨³å®šã€‚React Cache è¿˜åœ¨å¿«é€Ÿå˜åŒ–ä¸­ï¼Œå¹¶ä¸”è¿˜ä¼šå˜åŠ¨å¾ˆå¤šæ¬¡ã€‚ä¹Ÿæœ‰ä¸€äº›ä½é˜¶ APIï¼Œä»–ä»¬ç¼ºå°‘ä¸€äº›æ¯”è¾ƒå¥½çš„é«˜é˜¶ APIï¼Œè¿™ä½¿å¾—å®ƒä»¬æ— æ³•è¢«å®ç°ã€‚æˆ‘ä»¬ä¸æ¨èåœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ React Cacheï¼Œé™¤äº†ä¸€äº›éå¸¸æ—©èµ·çš„å®éªŒä¸­ã€‚æ³¨æ„ï¼ŒReact Cache è‡ªèº«å¹¶æ²¡æœ‰ä¸ React å‘å¸ƒå¼ºç»‘å®šï¼Œä½†æ˜¯ç°æœ‰çš„ alpha ç‰ˆæœ¬ç¼ºå°‘åŸºç¡€åŠŸèƒ½ï¼Œæ¯”å¦‚ç¼“å­˜éªŒè¯ï¼Œä½ ä¼šé‡åˆ°ä¸€äº›éº»çƒ¦ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨è¿™ä¸ª React ç‰ˆæœ¬ä¸­ï¼Œè¾¾åˆ°ä¸€äº›å¯ä½¿ç”¨çš„ç‚¹ã€‚</p>\n<p>åœ¨æœ€ç»ˆï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„æ•°æ®è·å–éƒ½é€šè¿‡ Suspense æ¥å®ç°ï¼Œä½†è¿™ä¸ªè¿˜éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œç›´åˆ°æ‰€æœ‰çš„é›†æˆé¡¹éƒ½å®Œæˆã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬æœŸæœ›å®ƒèƒ½å¤Ÿè¢«å¢é‡å¼é‡‡ç”¨ï¼Œé€šè¿‡ç±»ä¼¼äº Apollo æˆ–è€… Relay è¿™ç±»ä¸­é—´å±‚æ¥å®ç°ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ã€‚ç¼ºå°‘é«˜é˜¶ API å¹¶ä¸æ˜¯æˆ‘ä»¬é‡åˆ°çš„å”¯ä¸€éº»çƒ¦â€”â€”è¿™ä¹Ÿæœ‰äº›é‡è¦çš„ UI æ¨¡å¼æš‚æ—¶ä¹Ÿä¸æ”¯æŒï¼Œæ¯”å¦‚åœ¨åŠ è½½è§†å›¾å±‚çº§å¤–å±•ç¤ºè¿›åº¦å±•ç¤ºå™¨ã€‚è·Ÿä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨è¿™ç¯‡åšå®¢ä¸­äº¤æµæˆ‘ä»¬çš„è¿›åº¦ã€‚</p>\n<p><strong>åœ¨ React DOM ä¸­çš„çŠ¶æ€</strong>ï¼šæŠ€æœ¯ä¸Šè¯´ï¼Œä¸€ä¸ªå…¼å®¹çš„ç¼“å­˜åœ¨ React16.6 ä¸­å·²ç»å¯ä»¥é…åˆ<code class=\"language-text\">&lt;React.Suspense&gt;</code>è¿›è¡Œå·¥ä½œäº†ã€‚ç„¶è€Œï¼ŒçŸ¥é“è¿™ä¸ªå°ç‰ˆæœ¬å‘å¸ƒï¼Œæˆ‘ä»¬é¢„è®¡éƒ½ä¸ä¼šæœ‰ä¸€ä¸ªå¥½çš„ç¼“å­˜å®ç°ã€‚å¦‚æœä½ æ•¢äºå†’é™©ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹ React Cache alphas ç‰ˆæœ¬æ¥å®ç°è‡ªå·±çš„ç¼“å­˜ã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœ‰æ­£å¼æ–‡æ¡£å‰ï¼Œæ¨¡å‹æœ‰æå¤§æ¦‚ç‡è¢«è¯¯è§£ã€‚</p>\n<p><strong>åœ¨ React DOM Server ä¸­çš„çŠ¶æ€</strong>ï¼šSuspense åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­æš‚æ—¶ä¸å¯ç”¨ã€‚å°±åƒä¹‹å‰æåˆ°çš„ä¸€æ ·ï¼Œæˆ‘ä»¬å·²ç»å¼€å§‹ç ”ç©¶ä¸€ä¸ªæ–°çš„å¼‚æ­¥æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå®ƒä¼šæ”¯æŒ Suspenseï¼Œä½†æ˜¯é‚£æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„é¡¹ç›®ï¼Œä¼šå ç”¨ 2019 éå¸¸å¤§å—çš„æ—¶é—´æ¥å®Œæˆã€‚</p>\n<p><strong>å»ºè®®</strong>ï¼šåˆ°è¿™ä¸ªå°ç‰ˆæœ¬å‘å¸ƒå†æ¥ä½¿ç”¨ Suspense è¿›è¡Œæ•°æ®è·å–ã€‚ä¸ç”¨ä½¿ç”¨ 16.6 ä¸­çš„ Suspense åŠŸèƒ½æ¥å®ç°å®ƒï¼Œç°åœ¨è¿˜ä¸æ”¯æŒã€‚ç„¶è€Œï¼Œå½“æ•°æ®è·å–çš„ Suspense è¢«å®˜æ–¹æ”¯æŒåï¼Œä½ å·²å­˜çš„ç”¨äºä»£ç æ‹†åˆ†çš„<code class=\"language-text\">&lt;Suspense&gt;</code>ç»„ä»¶è¿˜æ˜¯èƒ½å¤Ÿå±•ç¤ºåŠ è½½çŠ¶æ€çš„ã€‚</p>\n<hr>\n<h4>å…¶ä»–é¡¹ç›®</h4>\n<h5>ç°ä»£åŒ– React DOM</h5>\n<p>æˆ‘ä»¬å·²ç»å¼€å§‹è°ƒæŸ¥<a href=\"https://github.com/facebook/react/issues/13525\">ç®€åŒ–å’Œç°ä»£åŒ–</a>ReactDOMï¼Œç›®æ ‡æ˜¯ç¼©å‡åŒ…çš„å¤§å°å¹¶ä¸æµè§ˆå™¨è¡Œä¸ºé é½ã€‚ç°åœ¨è¯´å“ªäº›ç‚¹èƒ½å¤Ÿåšåˆ°è¾¾åˆ°ç›®çš„è¿˜ä¸ºæ—¶å°šæ—©ï¼Œé¡¹ç›®ç°åœ¨è¿˜å¤„äºæ¢ç´¢é˜¶æ®µã€‚æˆ‘ä»¬ä¼šåœ¨ä¸Šé¢çš„ issue ä¸­äº¤æµè¿›åº¦ã€‚</p>\n<h5>æœåŠ¡ç«¯æ¸²æŸ“çš„ Suspense</h5>\n<p>æˆ‘ä»¬å·²ç»å¼€å§‹è®¾è®¡ä¸€ç§æ”¯æŒ Suspenseï¼ˆåŒ…æ‹¬ç­‰å¾…æœåŠ¡ç«¯å¼‚æ­¥æ•°æ®æ—¶æ— é‡å¤æ¸²æŸ“ï¼‰ã€æ”¯æŒæ¸è¿›å¼åŠ è½½ã€æ”¯æŒåœ¨ chunks ä¸­ hydrante é¡µé¢å†…å®¹çš„æ–°çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ä½ èƒ½å¤Ÿåœ¨<a href=\"https://www.youtube.com/watch?v=z-6JC0_cOns\">è¿™ä¸ª talk</a> ä¸­çœ‹åˆ°æ—©æœŸåŸå‹ã€‚æ–°çš„æœåŠ¡ç«¯æ¸²æŸ“ä¼šæˆä¸ºæˆ‘ä»¬ 2019 å¹´çš„ä¸»è¦å…³æ³¨ç‚¹ï¼Œä½†æ˜¯ç°åœ¨è¯´å®ƒçš„å‘å¸ƒè®¡åˆ’è¿˜ä¸ºæ—¶å°šæ—©ã€‚å®ƒçš„å¼€å‘ï¼Œä¾ç„¶ä¼šåœ¨å¾€å¸¸ä¸€æ ·<a href=\"https://github.com/facebook/react/pulls?utf8=%E2%9C%93&#x26;q=is%3Apr+is%3Aopen+fizz\">åœ¨ GitHub ä¸Šè¿›è¡Œ</a>ã€‚</p>\n<hr>\n<p>å°±æ˜¯è¿™äº›äº†ã€‚æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œè¿™è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšï¼Œä½†æ˜¯æˆ‘ä»¬æœŸå¾…åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆä¸­çœ‹åˆ°æ›´å¤šè¿›æ­¥ã€‚</p>\n<p>æˆ‘ä»¬å¸Œæœ›è¿™ç¯‡åšå®¢èƒ½å¤Ÿè®©ä½ äº†è§£æˆ‘ä»¬æ­£åœ¨åšä»€ä¹ˆï¼Œä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ä»€ä¹ˆä»¥åŠä½ èƒ½å¤ŸæœŸå¾…æœªæ¥èƒ½å¤Ÿä½¿ç”¨ä»€ä¹ˆã€‚åœ¨ç¤¾äº¤åª’ä½“ä¸Šæœ‰å¾ˆå¤šå…³äºæ–°åŠŸèƒ½çš„è®¨è®ºï¼Œå¦‚æœä½ è¯»äº†è¿™ç¯‡åšå®¢ï¼Œé‚£ä½ å°±ä¸ä¼šé”™è¿‡é‡è¦çš„ç‚¹äº†ã€‚</p>\n<p>æˆ‘ä»¬æœŸå¾…æ”¶åˆ°åé¦ˆï¼ŒæœŸå¾…åœ¨ <a href=\"https://github.com/reactjs/rfcs\">RFC ä»“åº“</a>ã€<a href=\"https://github.com/facebook/react/issues\">issue è·Ÿè¸ª</a>æˆ–è€… <a href=\"https://mobile.twitter.com/reactjs\">Twitter</a>ä¸Šè·å¾—ä½ çš„æ¥ä¿¡ã€‚</p>","fields":{"postName":"/React16.xRoadmap/React16.xRoadmap"}}},{"node":{"id":"685935eb-2c2c-5807-ad4f-0fc8e788ee41","frontmatter":{"title":"JSXã€å…ƒç´ å’Œç»„ä»¶","date":"2018-12-02","description":"æ€»ç»“è‡ªReact å®˜æ–¹æ–‡æ¡£ï¼šhttps://reactjs.org/docsã€‚æ‘˜å½•éƒ¨åˆ†æœ‰å…³ JSXã€å…ƒç´ å’Œç»„ä»¶å®¹æ˜“ä¼šè¢«å¿½ç•¥çš„ç‚¹"},"html":"<h4>æœ‰å…³ JSX</h4>\n<h5>JSXç”¨ä½œè¡¨è¾¾å¼</h5>\n<ul>\n<li>jsx æ˜¯JavaScript è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«ç”¨åœ¨ JavaScript è¯­å¥ä¸­ï¼Œè¢«èµ‹å€¼ã€æ¥å—å‚æ•°ä¼ å€¼ä»¥åŠä½œä¸ºå‡½æ•°è¿”å›å€¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getGreeting</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token function\">formatName</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> Stranger<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>ç»™ jsx å±æ€§èµ‹å€¼</h5>\n<ul>\n<li>ä½¿ç”¨åŒå¼•å·ç»™å±æ€§èµ‹äºˆå¸¸æ•°å€¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>div tabIndex<span class=\"token operator\">=</span><span class=\"token string\">\"0\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ä½¿ç”¨å¤§æ‹¬å·ç»™å±æ€§èµ‹äºˆJavaScript è¡¨è¾¾å¼å€¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>avatarUrl<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>img<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>jsxä¸­çš„å±æ€§é‡‡ç”¨é©¼å³°å¼çš„å†™æ³•ï¼Œå¦‚ classNameã€tabIndex</li>\n</ul>\n<h5>jsx é˜²æ­¢æ³¨å…¥æ”»å‡»</h5>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> title <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>potentiallyMaliciousInput<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// This is safe:</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ä½¿ç”¨å¤§æ‹¬å·æ—¶ï¼ŒReact ä¼šæŠŠæ‰€æœ‰æ’å…¥çš„å€¼éƒ½è½¬ä¸ºå­—ç¬¦ä¸²åå†è¿›è¡Œæ¸²æŸ“ï¼Œä»è€Œé¿å…XSSæ”»å‡»</li>\n</ul>\n<h5>jsx çš„ç¼–è¯‘</h5>\n<ul>\n<li>Babel ä¼šè°ƒç”¨ React.createElement æ–¹æ³•æ¥ç¼–è¯‘ JSX</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token string\">\"greeting\"</span><span class=\"token operator\">></span>\n    Hello<span class=\"token punctuation\">,</span> world<span class=\"token operator\">!</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//ç›¸å½“äº</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>className<span class=\"token punctuation\">:</span> <span class=\"token string\">'greeting'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'Hello, world!'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//æœ€ç»ˆä¼šè¢«ç¼–è¯‘ä¸ºç±»ä¼¼äºä»¥ä¸‹å½¢å¼ï¼š</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n  props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    className<span class=\"token punctuation\">:</span> <span class=\"token string\">'greeting'</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token string\">'Hello, world!'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h4>æ¸²æŸ“å…ƒç´ </h4>\n<ul>\n<li>React ç»„ä»¶ç”± React å…ƒç´ æ„æˆï¼ŒReact å…ƒç´ éƒ½æ˜¯ç±»ä¼¼å¦‚ä¸‹çš„å¯¹è±¡ã€‚React DOM ä¼šè´Ÿè´£å°†è¿™äº›å¯¹è±¡æ¸²æŸ“ä¸ºå®é™…çš„ DOM å…ƒç´ </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token punctuation\">:</span> <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n  props<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    className<span class=\"token punctuation\">:</span> <span class=\"token string\">'greeting'</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token string\">'Hello, world!'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>è°ƒç”¨ <code class=\"language-text\">ReactDOM.render</code>è¿›è¡Œæ¸²æŸ“</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>React å…ƒç´ éƒ½æ˜¯ä¸å¯å˜çš„ã€‚ä¸€ä¸ªå…ƒç´ ä¸€æ—¦åˆ›å»ºï¼Œåˆ™å…¶å­å…ƒç´ åŠå±æ€§éƒ½ä¸å¯å˜æ›´ã€‚å˜åŠ¨ UI çš„æ–¹å¼ä¹‹ä¸€å°±æ˜¯æ–°åˆ›å»ºä¸€ä¸ªå…ƒç´ å¹¶å°†å®ƒæ¸²æŸ“è‡³é¡µé¢ä¸­ã€‚</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>åœ¨å…ƒç´ å˜æ›´åçš„é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact åªä¼šæ¸²æŸ“å˜æ›´åçš„å†…å®¹ï¼Œæœªå˜æ›´çš„å†…å®¹ä¸ä¼šé‡å¤æ¸²æŸ“ã€‚å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œè™½ç„¶æ¯ç§’é’Ÿéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å…ƒç´ ï¼Œä½†æ˜¯ ReactDOM åœ¨æ›´æ–°æ—¶åªä¼šæ¸²æŸ“h2ä¸­å˜æ›´è¿‡çš„å†…å®¹ã€‚</li>\n</ul>\n<hr>\n<h4>ç»„ä»¶</h4>\n<h5>å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶</h5>\n<ul>\n<li>å‡½æ•°ç»„ä»¶æ¥å—å”¯ä¸€ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼ˆprops å¯¹è±¡ï¼‰ï¼Œè¿”å›ä¸€ä¸ª React å…ƒç´ </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ç±»ç»„ä»¶</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Welcome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Hello<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h5>ç»„ä»¶å¤§å†™</h5>\n<ul>\n<li>React ä¼šæŠŠå°å†™å­—æ¯å¼€å¤´çš„å…ƒç´ å½“åšDOMæ ‡ç­¾ï¼ŒæŠŠå¤§å†™å­—æ¯å¼€å¤´çš„æ‰ä½œä¸ºç»„ä»¶</li>\n</ul>\n<h5>props æ˜¯åªè¯»çš„</h5>\n<ul>\n<li>æ‰€æœ‰çš„ react ç»„ä»¶éƒ½å¿…é¡»è¡¨ç°å¾—åƒçº¯å‡½æ•°ã€‚</li>\n</ul>","fields":{"postName":"/jsxã€å…ƒç´ å’Œç»„ä»¶/jsxã€å…ƒç´ å’Œç»„ä»¶"}}},{"node":{"id":"9404004c-8e36-521f-81a8-7c91755f5fd3","frontmatter":{"title":"ä¸æ‰“åŒ…çš„æƒ…å†µä¸‹ä½¿ç”¨React","date":"2018-12-01","description":"æ€»ç»“è‡ªReactå®˜æ–¹æ–‡æ¡£ï¼šhttps://reactjs.org/docs/add-react-to-a-website.htmlï¼Œå¦‚ä½•åœ¨ä¸ç”¨webpackç­‰æ‰“åŒ…å·¥å…·çš„æƒ…å†µä¸‹ä½¿ç”¨React"},"html":"<h5>ä¸ä½¿ç”¨ JSX</h5>\n<p>ç›´æ¥åœ¨é¡µé¢ä¸­ä»¥ script çš„æ–¹å¼å¼•ç”¨reactå’Œ react-dom çš„ CND ä»£ç </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@16/umd/react.development.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@16/umd/react-dom.development.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>æ­¤æ—¶ï¼Œæ— æ³•è§£æ JSXï¼Œæ•…éœ€è¦ä½¿ç”¨ React.createElement çš„æ–¹å¼æ¥åˆ›å»ºç»„ä»¶ï¼Œå…·ä½“ç¤ºä¾‹å¯è§ï¼š<a href=\"https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605\">https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605</a></p>\n<hr>\n<h5>ç›´æ¥åœ¨é¡µé¢ä¸­ä½¿ç”¨ JSX</h5>\n<p>åœ¨é¡µé¢ä¸Šå¼•ç”¨ babelçš„åŒ…ä»£ç </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>åœ¨ htmlé¡µé¢çš„ JS ä»£ç ä¸­å°† script çš„ type ç½®ä¸º <code class=\"language-text\">type=&quot;text/babel&quot;</code>ï¼ŒJS ä»£ç å†™åœ¨è¿™ä¸ªç‰¹æ®Š script ä¸­</p>\n<p>åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼š</p>\n<p>1ã€æ­¤æ—¶æ— æ³•é€šè¿‡è¿™ä¸ª script å¼•ç”¨å¤–éƒ¨ JS æ–‡ä»¶ï¼Œå› ä¸ºè®¾ç½® type åè¿™ä¸ª script å·²ç»ä¸æ˜¯ä¸€ä¸ªä½œç”¨ä¸ºå¼•ç”¨ JS çš„script æ ‡ç­¾äº†</p>\n<p>2ã€JSX çš„ç¼–è¯‘å‘ç”Ÿåœ¨æµè§ˆå™¨ä¸­ï¼Œæ‰€ä»¥é¡µé¢åŠ è½½é€Ÿåº¦æ…¢ï¼Œæ‰€ä»¥å®ƒä¸é€‚åˆç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­</p>\n<hr>\n<h5>å®æ—¶ç¼–è¯‘ JSX</h5>\n<p>å®‰è£… babel-cli@6 å’Œ babel-preset-react-app@3ï¼Œé€šè¿‡ babel --watch çš„åŠŸèƒ½è¿›è¡Œå®æ—¶ç¼–è¯‘ï¼Œå°†æ–‡ä»¶ç¼–è¯‘ä¸ºæµè§ˆå™¨å¯ä»¥ç›´æ¥æ‰§è¡Œçš„æ–‡ä»¶ï¼Œhtml ä¸­ç›´æ¥å¼•ç”¨ç¼–è¯‘åçš„æ–‡ä»¶</p>","fields":{"postName":"/ä¸æ‰“åŒ…çš„æƒ…å†µä¸‹ä½¿ç”¨React/ä¸æ‰“åŒ…çš„æƒ…å†µä¸‹ä½¿ç”¨React"}}}]}},"pageContext":{}}